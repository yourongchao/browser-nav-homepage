# 修复网址验证逻辑问题

## 1. 问题分析
在`handleEditExistingSubmit`方法中，直接使用了`new URL(url)`来验证URL格式，而没有使用我们之前实现的`validateAndNormalizeUrl`方法。这导致没有协议前缀的URL（如"www.baidu.com"）被判定为无效，因为`new URL()`构造函数对于没有协议前缀的URL会直接抛出错误。

## 2. 修复方案
修改`handleEditExistingSubmit`方法，将直接使用`new URL(url)`的验证逻辑替换为使用`validateAndNormalizeUrl`方法，确保能够正确处理没有协议前缀的URL。

## 3. 代码修改

### 3.1 修改handleEditExistingSubmit方法
将以下代码：
```javascript
// 验证URL格式
try {
    new URL(url);
} catch {
    this.showToast('请输入有效的网址', 'error');
    return;
}

const itemData = { name, url };
```

替换为：
```javascript
// 验证和规范化URL
const validationResult = this.validateAndNormalizeUrl(url);
if (!validationResult.valid) {
    this.showToast(validationResult.message, 'error');
    return;
}

const normalizedUrl = validationResult.url;
const itemData = { name, url: normalizedUrl };
```

## 4. 预期效果
- 修复后，"www.baidu.com"将被正确识别为有效URL
- 自动添加https://协议前缀，规范化为"https://www.baidu.com/"
- 保持对其他无效URL格式的正确过滤能力
- 与系统其他模块兼容

## 5. 测试验证
- 测试"www.baidu.com"、"baidu.com"等无协议URL是否能正确验证和规范化
- 测试带协议的URL是否仍能正常工作
- 测试无效URL是否能被正确过滤

## 6. 文件修改清单
- `script.js`：修改`handleEditExistingSubmit`方法，使用`validateAndNormalizeUrl`方法进行URL验证和规范化